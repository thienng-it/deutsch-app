@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --german-black: #000000;
    --german-red:   #DD0000;
    --german-gold:  #FFCE00;
  }

  * { box-sizing: border-box; }
  html { scroll-behavior: smooth; }

  body {
    @apply font-sans antialiased;
    min-height: 100vh;
    background-color: #f8fafc; /* light: closer to slate-50  */
    color:            #0f172a; /* light: slate-900  */
  }
  html.dark body {
    background-color: #020617; /* dark: slate-950   */
    color:            #f8fafc; /* dark: slate-50    */
  }
}

@layer components {
  /* ── Buttons ─────────────────────────────────────────── */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl
           font-semibold text-sm transition-all duration-300 ease-out focus:outline-none
           focus:ring-2 focus:ring-offset-2 focus:ring-offset-white
           dark:focus:ring-offset-slate-950 hover:scale-[1.02] active:scale-[0.98]
           disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 shadow-sm hover:shadow-md;
  }
  .btn-primary {
    @apply btn bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400
           active:from-red-700 active:to-red-600 text-white focus:ring-red-500
           shadow-red-500/20 hover:shadow-red-500/40;
  }
  .btn-secondary {
    @apply btn bg-slate-100 hover:bg-slate-200 active:bg-slate-300
           dark:bg-slate-800 dark:hover:bg-slate-700 dark:active:bg-slate-600
           text-slate-800 dark:text-slate-100 focus:ring-slate-400
           border border-slate-200 dark:border-slate-700;
  }
  .btn-gold {
    @apply btn bg-gradient-to-r from-yellow-500 to-yellow-400 hover:from-yellow-400 hover:to-yellow-300
           active:from-yellow-600 active:to-yellow-500 text-black focus:ring-yellow-400
           shadow-yellow-500/20 hover:shadow-yellow-500/40;
  }
  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl
           font-semibold text-sm transition-all duration-200 ease-out focus:outline-none
           bg-transparent hover:bg-slate-100 active:bg-slate-200
           dark:hover:bg-slate-800 dark:active:bg-slate-700 hover:scale-[1.02] active:scale-[0.98]
           text-slate-600 dark:text-slate-300 focus:ring-slate-500;
  }
  .btn-sm { @apply px-3 py-1.5 text-xs; }
  .btn-lg { @apply px-6 py-3 text-base; }

  /* ── Cards ───────────────────────────────────────────── */
  .card {
    @apply bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border border-slate-200 dark:border-slate-800 rounded-2xl p-5 shadow-sm transition-shadow duration-300;
  }
  .card-hover {
    @apply card cursor-pointer hover:border-red-500/50 hover:shadow-lg hover:shadow-red-500/10
           hover:-translate-y-1 transition-all duration-300 ease-out;
  }

  /* ── Inputs ──────────────────────────────────────────── */
  .input {
    @apply w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700
           rounded-xl px-4 py-3 shadow-sm
           text-slate-900 dark:text-slate-100
           placeholder-slate-400 dark:placeholder-slate-500
           focus:outline-none focus:ring-2 focus:ring-red-500/50 focus:border-red-500
           transition-all duration-300 ease-out hover:border-slate-300 dark:hover:border-slate-600;
  }

  /* ── Badges ──────────────────────────────────────────── */
  .badge {
    @apply inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-semibold;
  }
  .badge-a1  { @apply badge bg-green-100  dark:bg-green-900/50  text-green-800  dark:text-green-400  border border-green-300  dark:border-green-700/50; }
  .badge-a2  { @apply badge bg-teal-100   dark:bg-teal-900/50   text-teal-800   dark:text-teal-400   border border-teal-300   dark:border-teal-700/50; }
  .badge-b1  { @apply badge bg-blue-100   dark:bg-blue-900/50   text-blue-800   dark:text-blue-400   border border-blue-300   dark:border-blue-700/50; }
  .badge-b2  { @apply badge bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-400 border border-purple-300 dark:border-purple-700/50; }
  .badge-c1  { @apply badge bg-orange-100 dark:bg-orange-900/50 text-orange-800 dark:text-orange-400 border border-orange-300 dark:border-orange-700/50; }

  /* ── German flag stripe ──────────────────────────────── */
  .flag-stripe {
    background: linear-gradient(
      to bottom,
      #000 0%, #000 33.3%,
      #DD0000 33.3%, #DD0000 66.6%,
      #FFCE00 66.6%, #FFCE00 100%
    );
  }

  /* ── Flip card ───────────────────────────────────────── */
  .flip-container {
    perspective: 1000px;
  }
  .flip-card {
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.6s ease;
  }
  .flip-card.flipped {
    transform: rotateY(180deg);
  }
  .flip-front,
  .flip-back {
    position: absolute;
    inset: 0;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  .flip-back {
    transform: rotateY(180deg);
  }

  /* ── Progress bar ────────────────────────────────────── */
  .progress-bar {
    @apply relative overflow-hidden bg-gray-200 dark:bg-gray-800 rounded-full h-2;
  }
  .progress-fill {
    @apply absolute inset-y-0 left-0 rounded-full transition-all duration-500;
  }

  /* ── Scrollbar ───────────────────────────────────────── */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track  { @apply bg-gray-100 dark:bg-gray-900; }
  ::-webkit-scrollbar-thumb  { @apply bg-gray-300 dark:bg-gray-700 rounded-full; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-gray-400 dark:bg-gray-600; }
}

@layer utilities {
  .text-german-gold { color: var(--german-gold); }
  .text-german-red  { color: var(--german-red); }

  /* iOS safe area for bottom nav */
  .safe-area-pb {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Responsive grid helpers */
  .grid-responsive-2 { @apply grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4; }
  .grid-responsive-3 { @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4; }
  .grid-responsive-4 { @apply grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4; }
}

/* ── Animations ──────────────────────────────────────────── */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-20px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes pulse-ring {
  0%   { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(239,68,68,0.4); }
  70%  { transform: scale(1);    box-shadow: 0 0 0 10px rgba(239,68,68,0); }
  100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(239,68,68,0); }
}
@keyframes bounce-in {
  0%   { transform: scale(0.3);  opacity: 0; }
  50%  { transform: scale(1.05); opacity: 1; }
  70%  { transform: scale(0.9); }
  100% { transform: scale(1); }
}
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%       { transform: translateX(-6px); }
  40%       { transform: translateX(6px); }
  60%       { transform: translateX(-4px); }
  80%       { transform: translateX(4px); }
}

.animate-fade-in      { animation: fadeIn 0.35s ease forwards; }
.animate-slide-left   { animation: slideInLeft 0.35s ease forwards; }
.animate-bounce-in    { animation: bounce-in 0.4s ease forwards; }
.animate-shake        { animation: shake 0.4s ease; }
.animate-pulse-ring   { animation: pulse-ring 1.5s ease infinite; }

/*
 * ══════════════════════════════════════════════════════════════════════
 *  Global light-mode remapping of hardcoded dark Tailwind utilities
 *
 *  These rules have specificity (0,1,0,1) — higher than Tailwind's
 *  single-class rules (0,0,1,0) — so no !important is needed.
 *
 *  Mirror: dark-slate-N  →  Tailwind light-slate equivalent
 * ══════════════════════════════════════════════════════════════════════
 */

/* ── Backgrounds ──────────────────────────────────────────────────── */
html:not(.dark) .bg-gray-950,
html:not(.dark) .bg-slate-950 { background-color: #f8fafc; }
html:not(.dark) .bg-gray-900,
html:not(.dark) .bg-slate-900 { background-color: #ffffff; }
html:not(.dark) .bg-gray-800,
html:not(.dark) .bg-slate-800 { background-color: #f1f5f9; }
html:not(.dark) .bg-gray-700,
html:not(.dark) .bg-slate-700 { background-color: #334155; }

/* ── Text ─────────────────────────────────────────────────────────── */
html:not(.dark) .text-gray-100,
html:not(.dark) .text-slate-100 { color: #0f172a; }
html:not(.dark) .text-gray-200,
html:not(.dark) .text-slate-200 { color: #1e293b; }
html:not(.dark) .text-gray-300,
html:not(.dark) .text-slate-300 { color: #334155; }
html:not(.dark) .text-gray-400,
html:not(.dark) .text-slate-400 { color: #64748b; }
html:not(.dark) .text-gray-500,
html:not(.dark) .text-slate-500 { color: #94a3b8; }
html:not(.dark) .text-gray-600,
html:not(.dark) .text-slate-600 { color: #475569; }
html:not(.dark) .text-gray-700,
html:not(.dark) .text-slate-700 { color: #334155; }

/* ── Borders ──────────────────────────────────────────────────────── */
html:not(.dark) .border-gray-800,
html:not(.dark) .border-slate-800 { border-color: #e2e8f0; }
html:not(.dark) .border-gray-700,
html:not(.dark) .border-slate-700 { border-color: #cbd5e1; }
html:not(.dark) .border-gray-600,
html:not(.dark) .border-slate-600 { border-color: #94a3b8; }

/* ── Hover backgrounds ────────────────────────────────────────────── */
html:not(.dark) .hover\:bg-gray-800:hover,
html:not(.dark) .hover\:bg-slate-800:hover { background-color: #e2e8f0; }
html:not(.dark) .hover\:bg-gray-700:hover,
html:not(.dark) .hover\:bg-slate-700:hover { background-color: #334155; }

/* ── Hover text ───────────────────────────────────────────────────── */
html:not(.dark) .hover\:text-gray-100:hover,
html:not(.dark) .hover\:text-slate-100:hover { color: #0f172a; }
html:not(.dark) .hover\:text-gray-200:hover,
html:not(.dark) .hover\:text-slate-200:hover { color: #1e293b; }
html:not(.dark) .hover\:text-gray-300:hover,
html:not(.dark) .hover\:text-slate-300:hover { color: #334155; }
